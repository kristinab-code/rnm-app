{"ast":null,"code":"import _toConsumableArray from\"/Users/kris/Documents/projects/js/my-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"/Users/kris/Documents/projects/js/my-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/kris/Documents/projects/js/my-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/kris/Documents/projects/js/my-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/kris/Documents/projects/js/my-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Locations=function Locations(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),locations=_useState2[0],setLocations=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),hoveredLocation=_useState4[0],setHoveredLocation=_useState4[1];useEffect(function(){var getData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(url){var response,data,nextPage;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(url);case 3:response=_context.sent;_context.next=6;return response.json();case 6:data=_context.sent;if(!data.info.next){_context.next=14;break;}_context.next=10;return getData(data.info.next);case 10:nextPage=_context.sent;return _context.abrupt(\"return\",data.results.concat(nextPage));case 14:return _context.abrupt(\"return\",data.results);case 15:_context.next=20;break;case 17:_context.prev=17;_context.t0=_context[\"catch\"](0);console.error('Error',_context.t0);case 20:case\"end\":return _context.stop();}},_callee,null,[[0,17]]);}));return function getData(_x){return _ref.apply(this,arguments);};}();getData('https://rickandmortyapi.com/api/location').then(function(data){var locationsWithBgColor=data.map(function(location){return _objectSpread(_objectSpread({},location),{},{color:location.residents.length>0?\"#\".concat(Math.floor(Math.random()*Math.pow(16,6)).toString(16)).padStart(7,'0'):\"#cccccc\"});});// console.log(locationsWithBgColor);\nsetLocations(locationsWithBgColor);});},[]);var maxWidth=Math.max.apply(Math,_toConsumableArray(locations.map(function(location){return location.residents.length;})));var height=50;// console.log(locations);\nvar Popup=function Popup(_ref2){var _ref2$location=_ref2.location,name=_ref2$location.name,residents=_ref2$location.residents,type=_ref2$location.type,dimension=_ref2$location.dimension,color=_ref2$location.color;return/*#__PURE__*/_jsxs(\"div\",{className:\"popup\",style:{borderColor:color},children:[/*#__PURE__*/_jsx(\"h2\",{children:name}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Residents: \",residents.length]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Type: \",type]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Dimension: \",dimension]})]});};return/*#__PURE__*/_jsxs(\"div\",{className:\"wrapper\",children:[/*#__PURE__*/_jsxs(\"svg\",{width:\"100%\",height:height*locations.length,children:[/*#__PURE__*/_jsx(\"defs\",{children:/*#__PURE__*/_jsx(\"pattern\",{pattern:true,id:\"diagonal\",width:\"10\",height:\"10\",patternTransform:\"rotate(45 0 0)\",patternUnits:\"userSpaceOnUse\",children:/*#__PURE__*/_jsx(\"line\",{x1:\"0\",y1:\"0\",x2:\"0\",y2:\"10\",style:{stroke:\"#cccccc\",strokeWidth:1}})})}),locations.map(function(location,index){var residents=location.residents.length;var width=residents/maxWidth*100;return/*#__PURE__*/_jsxs(\"g\",{children:[/*#__PURE__*/_jsx(\"rect\",{x:0,y:index*height,width:residents>0?\"\".concat(width,\"%\"):\"100%\",height:height,fill:location.color,style:{fill:residents>0?\"\":\"url(#diagonal)\"},onMouseEnter:function onMouseEnter(){return setHoveredLocation(location);},onMouseLeave:function onMouseLeave(){return setHoveredLocation(null);}}),/*#__PURE__*/_jsx(\"text\",{x:0.5,y:index*height+height*0.5,children:residents})]},location.id);})]}),hoveredLocation&&/*#__PURE__*/_jsx(Popup,{location:hoveredLocation})]});};export default Locations;","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","Locations","_useState","_useState2","_slicedToArray","locations","setLocations","_useState3","_useState4","hoveredLocation","setHoveredLocation","getData","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","url","response","data","nextPage","wrap","_callee$","_context","prev","next","fetch","sent","json","info","abrupt","results","concat","t0","console","error","stop","_x","apply","arguments","then","locationsWithBgColor","map","location","_objectSpread","color","residents","length","Math","floor","random","pow","toString","padStart","maxWidth","max","_toConsumableArray","height","Popup","_ref2","_ref2$location","name","type","dimension","className","style","borderColor","children","width","pattern","id","patternTransform","patternUnits","x1","y1","x2","y2","stroke","strokeWidth","index","x","y","fill","onMouseEnter","onMouseLeave"],"sources":["/Users/kris/Documents/projects/js/my-app/src/Locations.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\n\nconst Locations = () => {\n\tconst [locations, setLocations] = useState([]);\n\tconst [hoveredLocation, setHoveredLocation] = useState();\n\n\tuseEffect(() => {\n\t\tconst getData = async (url) => {\n\t\t\ttry {\n\t\t\t\tconst response = await fetch(url);\n\t\t\t\tconst data = await response.json();\n\t\t\t\t// console.log('first page data', data);\n\n\t\t\t\tif (data.info.next) {\n\t\t\t\t\tconst nextPage = await getData(data.info.next);\n\t\t\t\t\t// console.log('next page data', nextPage);\n\t\t\t\t\treturn data.results.concat(nextPage);\n\t\t\t\t} else {\n\t\t\t\t\treturn data.results;\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t  console.error('Error', error);\n\t\t\t}\n\t\t}\n\n\t\tgetData('https://rickandmortyapi.com/api/location')\n\t\t\t.then(data => {\n\t\t\t\tconst locationsWithBgColor = data.map(location => ({\n\t\t\t\t  ...location,\n\t\t\t\t  color: location.residents.length > 0 ? (`#${(Math.floor(Math.random() * Math.pow(16, 6))).toString(16)}`).padStart(7, '0') : \"#cccccc\"\n\t\t\t\t}));\n\t\t\t\t// console.log(locationsWithBgColor);\n\t\t\t\tsetLocations(locationsWithBgColor);\n\t\t\t});\n\t}, []);\n\n\tconst maxWidth = Math.max(...locations.map(location => location.residents.length));\n\tconst height = 50;\n\n\t// console.log(locations);\n\n\tconst Popup = ({ location: {name, residents, type, dimension, color} }) => {\n\t\treturn (\n\t\t\t<div className = \"popup\" style = {{ borderColor: color }}>\n\t\t\t\t<h2>{name}</h2>\n\t\t\t\t<p>Residents: {residents.length}</p>\n\t\t\t\t<p>Type: {type}</p>\n\t\t\t\t<p>Dimension: {dimension}</p>\n\t\t\t</div>\n\t\t)\n\t}\n\n\treturn (\n\t\t<div className=\"wrapper\">\n\t\t\t<svg width=\"100%\" height={height * locations.length}>\n\t\t\t\t<defs>\n\t\t\t\t\t<pattern pattern id=\"diagonal\"\n\t\t\t\t\twidth=\"10\"\n\t\t\t\t\theight=\"10\"\n\t\t\t\t\tpatternTransform=\"rotate(45 0 0)\"\n\t\t\t\t\tpatternUnits=\"userSpaceOnUse\">\n\t\t\t\t\t\t<line x1=\"0\" y1=\"0\" x2=\"0\" y2=\"10\" style={{stroke: \"#cccccc\", strokeWidth: 1}} />\n\t\t\t\t\t</pattern>\n\t\t\t\t</defs>\n\t\t\t\t{locations.map((location, index) => {\n\t\t\t\t\tconst residents = location.residents.length;\n\t\t\t\t\tconst width = (residents / maxWidth) * 100;\n\t\t\t\t\t\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<g key={location.id}>\n\t\t\t\t\t\t\t<rect\n\t\t\t\t\t\t\t\tx={0}\n\t\t\t\t\t\t\t\ty={index * height} \n\t\t\t\t\t\t\t\twidth={residents > 0 ? `${width}%` : \"100%\"} \n\t\t\t\t\t\t\t\theight={height}\n\t\t\t\t\t\t\t\tfill={location.color}\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tfill: residents > 0 ? \"\" : \"url(#diagonal)\"\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonMouseEnter = {\n\t\t\t\t\t\t\t\t  () => setHoveredLocation(location)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tonMouseLeave = {\n\t\t\t\t\t\t\t\t  () => setHoveredLocation(null)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<text\n\t\t\t\t\t\t\t\tx={0.5}\n\t\t\t\t\t\t\t\ty={(index * height) + height * 0.5}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{residents}\n\t\t\t\t\t\t\t</text>\n\t\t\t\t\t\t</g>\n\t\t\t\t\t);\n\t\t\t\t})}\n\t\t\t</svg>\n\t\t\t{hoveredLocation && <Popup location={hoveredLocation} />}\n\t\t</div>\n\t);\n};\n\nexport default Locations;\n"],"mappings":"6oBAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAEnD,GAAM,CAAAC,SAAS,CAAG,QAAZ,CAAAA,SAASA,CAAA,CAAS,CACvB,IAAAC,SAAA,CAAkCN,QAAQ,CAAC,EAAE,CAAC,CAAAO,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAvCG,SAAS,CAAAF,UAAA,IAAEG,YAAY,CAAAH,UAAA,IAC9B,IAAAI,UAAA,CAA8CX,QAAQ,CAAC,CAAC,CAAAY,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAAjDE,eAAe,CAAAD,UAAA,IAAEE,kBAAkB,CAAAF,UAAA,IAE1Cb,SAAS,CAAC,UAAM,CACf,GAAM,CAAAgB,OAAO,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAOC,GAAG,MAAAC,QAAA,CAAAC,IAAA,CAAAC,QAAA,QAAAN,mBAAA,GAAAO,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAED,CAAAC,KAAK,CAACT,GAAG,CAAC,QAA3BC,QAAQ,CAAAK,QAAA,CAAAI,IAAA,CAAAJ,QAAA,CAAAE,IAAA,SACK,CAAAP,QAAQ,CAACU,IAAI,CAAC,CAAC,QAA5BT,IAAI,CAAAI,QAAA,CAAAI,IAAA,KAGNR,IAAI,CAACU,IAAI,CAACJ,IAAI,EAAAF,QAAA,CAAAE,IAAA,WAAAF,QAAA,CAAAE,IAAA,UACM,CAAAd,OAAO,CAACQ,IAAI,CAACU,IAAI,CAACJ,IAAI,CAAC,SAAxCL,QAAQ,CAAAG,QAAA,CAAAI,IAAA,QAAAJ,QAAA,CAAAO,MAAA,UAEPX,IAAI,CAACY,OAAO,CAACC,MAAM,CAACZ,QAAQ,CAAC,iBAAAG,QAAA,CAAAO,MAAA,UAE7BX,IAAI,CAACY,OAAO,UAAAR,QAAA,CAAAE,IAAA,kBAAAF,QAAA,CAAAC,IAAA,IAAAD,QAAA,CAAAU,EAAA,CAAAV,QAAA,aAGnBW,OAAO,CAACC,KAAK,CAAC,OAAO,CAAAZ,QAAA,CAAAU,EAAO,CAAC,CAAC,yBAAAV,QAAA,CAAAa,IAAA,MAAApB,OAAA,iBAEhC,kBAhBK,CAAAL,OAAOA,CAAA0B,EAAA,SAAAzB,IAAA,CAAA0B,KAAA,MAAAC,SAAA,OAgBZ,CAED5B,OAAO,CAAC,0CAA0C,CAAC,CACjD6B,IAAI,CAAC,SAAArB,IAAI,CAAI,CACb,GAAM,CAAAsB,oBAAoB,CAAGtB,IAAI,CAACuB,GAAG,CAAC,SAAAC,QAAQ,SAAAC,aAAA,CAAAA,aAAA,IACzCD,QAAQ,MACXE,KAAK,CAAEF,QAAQ,CAACG,SAAS,CAACC,MAAM,CAAG,CAAC,CAAG,IAAAf,MAAA,CAAMgB,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,CAAGF,IAAI,CAACG,GAAG,CAAC,EAAE,CAAE,CAAC,CAAC,CAAC,CAAEC,QAAQ,CAAC,EAAE,CAAC,EAAIC,QAAQ,CAAC,CAAC,CAAE,GAAG,CAAC,CAAG,SAAS,IACtI,CAAC,CACH;AACA/C,YAAY,CAACmC,oBAAoB,CAAC,CACnC,CAAC,CAAC,CACJ,CAAC,CAAE,EAAE,CAAC,CAEN,GAAM,CAAAa,QAAQ,CAAGN,IAAI,CAACO,GAAG,CAAAjB,KAAA,CAARU,IAAI,CAAAQ,kBAAA,CAAQnD,SAAS,CAACqC,GAAG,CAAC,SAAAC,QAAQ,QAAI,CAAAA,QAAQ,CAACG,SAAS,CAACC,MAAM,GAAC,EAAC,CAClF,GAAM,CAAAU,MAAM,CAAG,EAAE,CAEjB;AAEA,GAAM,CAAAC,KAAK,CAAG,QAAR,CAAAA,KAAKA,CAAAC,KAAA,CAAgE,KAAAC,cAAA,CAAAD,KAAA,CAA1DhB,QAAQ,CAAGkB,IAAI,CAAAD,cAAA,CAAJC,IAAI,CAAEf,SAAS,CAAAc,cAAA,CAATd,SAAS,CAAEgB,IAAI,CAAAF,cAAA,CAAJE,IAAI,CAAEC,SAAS,CAAAH,cAAA,CAATG,SAAS,CAAElB,KAAK,CAAAe,cAAA,CAALf,KAAK,CAClE,mBACC7C,KAAA,QAAKgE,SAAS,CAAG,OAAO,CAACC,KAAK,CAAI,CAAEC,WAAW,CAAErB,KAAM,CAAE,CAAAsB,QAAA,eACxDrE,IAAA,OAAAqE,QAAA,CAAKN,IAAI,CAAK,CAAC,cACf7D,KAAA,MAAAmE,QAAA,EAAG,aAAW,CAACrB,SAAS,CAACC,MAAM,EAAI,CAAC,cACpC/C,KAAA,MAAAmE,QAAA,EAAG,QAAM,CAACL,IAAI,EAAI,CAAC,cACnB9D,KAAA,MAAAmE,QAAA,EAAG,aAAW,CAACJ,SAAS,EAAI,CAAC,EACzB,CAAC,CAER,CAAC,CAED,mBACC/D,KAAA,QAAKgE,SAAS,CAAC,SAAS,CAAAG,QAAA,eACvBnE,KAAA,QAAKoE,KAAK,CAAC,MAAM,CAACX,MAAM,CAAEA,MAAM,CAAGpD,SAAS,CAAC0C,MAAO,CAAAoB,QAAA,eACnDrE,IAAA,SAAAqE,QAAA,cACCrE,IAAA,YAASuE,OAAO,MAACC,EAAE,CAAC,UAAU,CAC9BF,KAAK,CAAC,IAAI,CACVX,MAAM,CAAC,IAAI,CACXc,gBAAgB,CAAC,gBAAgB,CACjCC,YAAY,CAAC,gBAAgB,CAAAL,QAAA,cAC5BrE,IAAA,SAAM2E,EAAE,CAAC,GAAG,CAACC,EAAE,CAAC,GAAG,CAACC,EAAE,CAAC,GAAG,CAACC,EAAE,CAAC,IAAI,CAACX,KAAK,CAAE,CAACY,MAAM,CAAE,SAAS,CAAEC,WAAW,CAAE,CAAC,CAAE,CAAE,CAAC,CACzE,CAAC,CACL,CAAC,CACNzE,SAAS,CAACqC,GAAG,CAAC,SAACC,QAAQ,CAAEoC,KAAK,CAAK,CACnC,GAAM,CAAAjC,SAAS,CAAGH,QAAQ,CAACG,SAAS,CAACC,MAAM,CAC3C,GAAM,CAAAqB,KAAK,CAAItB,SAAS,CAAGQ,QAAQ,CAAI,GAAG,CAE1C,mBACCtD,KAAA,MAAAmE,QAAA,eACCrE,IAAA,SACCkF,CAAC,CAAE,CAAE,CACLC,CAAC,CAAEF,KAAK,CAAGtB,MAAO,CAClBW,KAAK,CAAEtB,SAAS,CAAG,CAAC,IAAAd,MAAA,CAAMoC,KAAK,MAAM,MAAO,CAC5CX,MAAM,CAAEA,MAAO,CACfyB,IAAI,CAAEvC,QAAQ,CAACE,KAAM,CACrBoB,KAAK,CAAE,CACNiB,IAAI,CAAEpC,SAAS,CAAG,CAAC,CAAG,EAAE,CAAG,gBAC5B,CAAE,CACFqC,YAAY,CACV,SAAAA,aAAA,QAAM,CAAAzE,kBAAkB,CAACiC,QAAQ,CAAC,EACnC,CACDyC,YAAY,CACV,SAAAA,aAAA,QAAM,CAAA1E,kBAAkB,CAAC,IAAI,CAAC,EAC/B,CACD,CAAC,cACFZ,IAAA,SACCkF,CAAC,CAAE,GAAI,CACPC,CAAC,CAAGF,KAAK,CAAGtB,MAAM,CAAIA,MAAM,CAAG,GAAI,CAAAU,QAAA,CAElCrB,SAAS,CACL,CAAC,GAtBAH,QAAQ,CAAC2B,EAuBd,CAAC,CAEN,CAAC,CAAC,EACE,CAAC,CACL7D,eAAe,eAAIX,IAAA,CAAC4D,KAAK,EAACf,QAAQ,CAAElC,eAAgB,CAAE,CAAC,EACpD,CAAC,CAER,CAAC,CAED,cAAe,CAAAR,SAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}